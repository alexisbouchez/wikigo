# wikigo - Missing Features from pkg.go.dev

## High Priority

### Metadata & Header
- [x] Version badge with version selector dropdown
- [x] Published date display
- [x] License detection and display (BSD-3-Clause, MIT, etc.)
- [x] Imports count with clickable popup showing import list
- [x] "Imported by" count (requires indexing ecosystem)

### Navigation
- [x] Breadcrumb navigation (Discover Packages > Standard library > net > http)
- [x] Collapsible "Jump To" sidebar sections
- [x] Mobile-responsive hamburger menu
- [x] Sticky sidebar that scrolls with content

### Examples Section
- [x] Dedicated Examples section in index
- [x] Example code with "Share" button
- [x] Example code with "Format" button
- [x] Example code with "Run" button (Go Playground integration)
- [x] Expandable/collapsible example blocks

### Source Files Section
- [x] List all source files in package
- [x] Link each file to source browser with line count

### Directories Section
- [x] Show subpackages/subdirectories
- [x] Synopsis for each subdirectory

## Medium Priority

### Quality Indicators
- [x] Valid go.mod file check
- [x] Redistributable license badge
- [x] Tagged version indicator
- [x] Stable version indicator
- [x] "Learn more about best practices" link

### Repository & External Links
- [x] Repository link (github.com, cs.opensource.google, etc.)
- [x] Open Source Insights link
- [x] deps.dev link
- [x] "Report a Vulnerability" link

### UI Enhancements
- [x] Copy button for package import path
- [x] Copy button for code blocks
- [x] Dark mode toggle
- [x] Keyboard shortcuts (/ for search, etc.)
- [x] Expand/collapse all types in index

### Documentation Links
- [x] RFC references as clickable links (RFC 7231, etc.)
- [x] URL detection and auto-linking in docs
- [x] Cross-package type linking (e.g., io.Reader -> io package)

## Low Priority

### Search Enhancements
- [x] Search within package (symbols, docs)
- [x] Search suggestions/autocomplete
- [x] Filter by type (functions, types, methods)
- [x] Search result highlighting

### Additional Pages
- [x] License full text page
- [x] Imports list page
- [x] Imported by page (paginated)
- [x] Package versions list page
- [x] Module page (go.mod info)

### Performance & Polish
- [x] Lazy loading for large packages
- [x] Anchor link highlight animation
- [x] Smooth scroll behavior
- [x] Print-friendly stylesheet
- [x] SEO meta tags (og:image, description, etc.)

### Advanced Features
- [x] Go Playground embed for runnable examples
- [x] Symbol search across all indexed packages
- [x] Package comparison view
- [x] API diff between versions
- [x] Deprecation notices/warnings
- [x] Build constraints/platform tags display

## Infrastructure

### Indexing
- [x] Crawl and index Go modules from proxy.golang.org
- [x] Parse and store package documentation (SQLite database)
- [x] Track import relationships (imports table)
- [x] Version history tracking
- [x] Periodic re-indexing for updates

### API
- [x] JSON API for package metadata
- [x] Search API endpoint
- [x] Badge generation endpoint (shields.io compatible)

## Code Quality & Performance Improvements

### Testing
- [x] Database operations tests (upsert, search, FTS)
- [x] Crawler tests (version parsing, license detection)
- [x] GitHub Actions CI/CD workflow

### Performance
- [x] Database-backed search (replaces O(n) linear search)
- [x] Database-backed symbol search (FTS indexes)
- [x] Extract FindPackage() helper (eliminates code duplication)
- [x] Pagination for search results (50 results/page)
- [x] Pagination for symbol search (100 results/page)
- [x] Pagination for home page (100 packages/page, sorted)

### Error Handling
- [x] Fix JSON unmarshal error checks in db.go
- [x] Add error logging to web handlers

### Code Organization
- [x] Consolidate duplicate helper functions (util package)
  - identifyLicense, moduleToRepoURL, isDeprecated
  - Eliminates 150+ lines of duplicate code

### Future Improvements
- [x] Add caching for search results
- [x] Add web handler tests
- [x] Add rate limiting for API endpoints
- [ ] Implement search result relevance scoring

### AI Enhancement Features (Mistral Integration)

#### Core Infrastructure
- [x] Add Mistral API client with rate limiting
- [x] Feature flag system (enable/disable AI per feature)
- [x] Cost tracking and budgeting for API usage
- [x] Caching layer for AI-generated content

#### Documentation Generation
- [x] Auto-generate missing function/method comments
  - Detect uncommented exported functions (ai/docgen.go)
  - Generate concise doc comments from function signature + body (ai/service.go)
  - Store generated comments separately (db.go ai_docs table, cmd/gendocs)
  - Display AI-generated docs in web UI with visual badge
- [x] Auto-generate missing package synopsis
  - Detect packages without synopsis (ai/docgen.go)
  - Extract exported symbols for context
  - Generate synopsis via AI (ai/service.go)
  - Display in package overview when missing
- [ ] Enhance existing documentation
  - Detect sparse/unclear documentation
  - Suggest improvements or expansions
  - Add examples where missing

#### Search Enhancement
- [ ] Semantic search using embeddings
  - Generate embeddings for package descriptions
  - Allow natural language queries ("find HTTP client libraries")
  - Hybrid search: FTS + semantic similarity
- [ ] Query understanding
  - Interpret vague queries
  - Suggest related packages

#### Code Examples
- [ ] Auto-generate usage examples for functions
  - Simple example showing typical usage
  - Store in database, show in UI alongside docs
- [ ] Generate runnable playground links
  - Create minimal working examples
  - Auto-populate Go Playground

#### User-Facing Features
- [x] AI-powered "Explain this code" button
  - API endpoint for code explanation (web/server.go)
  - Explain button on functions and methods
  - Modal display with syntax highlighting
  - Integrated with Mistral AI service
- [ ] License summarization
  - Generate plain-English summaries of licenses
  - Highlight key terms (attribution, redistribution, etc.)
- [ ] Documentation translation
  - Translate docs to other languages
  - Cache translations per package version

#### Quality & Safety
- [ ] Hallucination detection
  - Validate generated content against actual code
  - Flag suspicious/incorrect generations
- [ ] Content moderation
  - Filter inappropriate AI outputs
  - Human review queue for generated docs
- [ ] A/B testing framework
  - Compare AI-generated vs manual docs
  - Measure user engagement/satisfaction

## JavaScript/TypeScript Support

### Core Infrastructure
- [x] Add JavaScript/TypeScript parser integration
  - Evaluated parser options (chose esbuild - Go-based, fast, full TS support)
  - Parse JS/TS files with esbuild (jsparser/parser.go)
  - Extract exported symbols (functions, classes, interfaces, types, enums)
  - Handle ES modules, TypeScript syntax
  - Tests passing (jsparser/parser_test.go)

### Symbol Extraction
- [ ] Extract JavaScript symbols
  - Functions (named, arrow, async)
  - Classes and methods
  - Constants and variables (const, let, var)
  - Exported symbols (export, module.exports)
- [ ] Extract TypeScript symbols
  - Interfaces and type aliases
  - Enums
  - Decorators
  - Generics
  - Type parameters

### Documentation Parsing
- [ ] Parse JSDoc comments
  - @param, @returns, @throws
  - @example, @deprecated
  - @see, @link references
  - Type annotations in JSDoc
- [ ] Parse TypeScript inline types
  - Function signatures with types
  - Interface definitions
  - Type aliases
  - Union/intersection types

### NPM Package Support
- [x] Crawl npm registry
  - Fetch package metadata from registry.npmjs.org (crawler/npm.go)
  - Download and extract package tarballs
  - Parse package.json (dependencies, scripts, etc.)
  - Handle scoped packages (@org/package)
  - Search npm packages
  - Tests for package fetching
- [ ] Version tracking
  - Latest, next, beta tags
  - Semver version resolution
  - Deprecation notices
  - Security advisories

### GitHub Repository Support
- [ ] Crawl GitHub repositories for JS/TS projects
  - Search GitHub API for JavaScript/TypeScript repos
  - Clone/download repositories
  - Detect package.json and parse metadata
  - Handle monorepos (workspaces, Lerna, Nx)
  - Parse JS/TS files from repository
  - Index symbols into database
- [ ] GitHub-specific metadata
  - Stars, forks, watchers count
  - Last commit date, contributors
  - README.md rendering
  - Topics/tags for discovery
  - License detection from LICENSE file

### Database Schema
- [ ] Extend database for JS/TS packages
  - New table: js_packages (name, version, description, author, license)
  - New table: js_symbols (name, kind, signature, file_path, line)
  - Store package.json metadata
  - Store TypeScript type definitions
- [ ] Index JS/TS symbols for search
  - FTS index on symbol names and descriptions
  - Type-aware search (filter by function/class/interface)
  - Cross-reference imports

### Web UI
- [ ] Package page for JS/TS packages
  - Display README.md
  - Show API documentation
  - List exports (functions, classes, types)
  - Syntax highlighting for JavaScript/TypeScript
- [ ] Symbol browser
  - Navigate classes and methods
  - View type definitions
  - Click-through type references
  - Show inheritance hierarchy
- [ ] Search integration
  - Search npm packages by name
  - Search symbols within packages
  - Filter by language (Go vs JS/TS)

### Type System Integration
- [ ] TypeScript type resolution
  - Resolve imported types
  - Display inferred types
  - Show type aliases expansion
  - Handle generic type parameters
- [ ] Type documentation
  - Generate type signature strings
  - Format complex types readably
  - Link to type definitions
  - Show type compatibility

### AI Enhancements for JS/TS
- [ ] Auto-generate JSDoc comments
  - Detect uncommented functions/classes
  - Generate @param and @returns
  - Infer types from TypeScript
- [ ] TypeScript type generation
  - Generate .d.ts for JavaScript files
  - Suggest type improvements
  - Detect type errors
- [ ] Code explanation
  - Explain JavaScript closures, async/await
  - Explain TypeScript advanced types
  - Explain React components, hooks

### Build Tool Integration
- [ ] Support common bundlers
  - Webpack configuration parsing
  - Vite config
  - Rollup config
  - Detect entry points
- [ ] Monorepo support
  - Detect Lerna/Nx workspaces
  - Parse workspace packages
  - Show dependency graph

### Testing
- [ ] JS/TS parser tests
  - Test various JavaScript syntax versions (ES5, ES6, ES2020+)
  - Test TypeScript syntax (interfaces, generics, decorators)
  - Test JSDoc parsing
- [ ] NPM crawler tests
  - Test package fetching
  - Test version resolution
  - Test scoped packages
- [ ] Integration tests
  - Full pipeline: crawl → parse → index → display
  - Test with real npm packages (express, react, typescript)

### Performance
- [ ] Lazy loading for large packages
  - Stream parsing for huge files
  - Paginate symbol lists
  - Background indexing
- [ ] Caching
  - Cache parsed ASTs
  - Cache type resolution results
  - Cache npm registry responses

### Future Enhancements
- [ ] Framework-specific support
  - React components and hooks
  - Vue.js components
  - Angular modules and services
  - Express.js routes
- [ ] Interactive playground
  - CodeSandbox/StackBlitz integration
  - Run examples in browser
  - Edit and fork examples

## Rust Support

### Core Infrastructure
- [ ] Add Rust parser integration
  - Evaluate parser options (syn crate via FFI, tree-sitter, regex-based)
  - Parse Rust files with chosen solution
  - Extract public items (functions, structs, enums, traits, modules)
  - Handle Rust-specific syntax (impl blocks, macros, lifetimes)
  - Tests for parser

### Symbol Extraction
- [ ] Extract Rust symbols
  - Functions and methods (pub fn)
  - Structs and their fields
  - Enums and variants
  - Traits and trait implementations
  - Constants and statics
  - Modules and submodules
  - Type aliases
  - Macros (macro_rules!, proc macros)

### Documentation Parsing
- [ ] Parse Rust doc comments
  - /// and //! style comments
  - #[doc = "..."] attributes
  - Extract code examples from doc tests
  - Parse markdown in doc comments
  - Cross-reference links [Type], [function]

### Crates.io Support
- [ ] Crawl crates.io registry
  - Fetch crate metadata from API
  - Download and extract .crate files
  - Parse Cargo.toml (dependencies, features, metadata)
  - Handle workspace crates
  - Search crates.io
  - Tests for crate fetching

### GitHub Repository Support
- [ ] Crawl GitHub for Rust projects
  - Search GitHub API for Rust repositories
  - Download repositories with Cargo.toml
  - Detect workspace structure
  - Parse Rust files from repository
  - Index symbols into database

### Database Schema
- [ ] Extend database for Rust crates
  - New table: rust_crates (name, version, description, license, authors)
  - New table: rust_symbols (name, kind, signature, visibility, file_path)
  - Store Cargo.toml metadata (features, dependencies)
  - Store documentation and examples
- [ ] Index Rust symbols for search
  - FTS index on symbol names and docs
  - Type-aware search (filter by struct/enum/trait)
  - Dependency graph indexing

### Web UI
- [ ] Crate page for Rust crates
  - Display README.md
  - Show API documentation
  - List public exports (functions, types, traits)
  - Syntax highlighting for Rust
  - Show feature flags
- [ ] Symbol browser
  - Navigate modules and items
  - View trait implementations
  - Show type definitions with generic parameters
  - Display macro documentation
- [ ] Search integration
  - Search crates by name
  - Search symbols within crates
  - Filter by language (Go vs JS/TS vs Rust)

### Type System Integration
- [ ] Rust type resolution
  - Resolve imported types
  - Display trait bounds
  - Show generic type parameters
  - Handle associated types
- [ ] Type documentation
  - Generate type signature strings
  - Format complex types readably
  - Link to type definitions
  - Show where clauses

### Build System Integration
- [ ] Cargo.toml parsing
  - Parse dependencies and dev-dependencies
  - Parse feature flags
  - Detect build scripts (build.rs)
  - Handle workspace configuration
- [ ] Feature analysis
  - Show optional dependencies
  - Display feature dependency tree
  - Detect default features

### Testing
- [ ] Rust parser tests
  - Test various Rust syntax (impl, traits, generics, lifetimes)
  - Test macro definitions
  - Test doc comment parsing
- [ ] Crates.io crawler tests
  - Test crate fetching
  - Test version resolution
  - Test workspace crates
- [ ] Integration tests
  - Full pipeline: crawl → parse → index → display
  - Test with real crates (serde, tokio, actix-web)

### Performance
- [ ] Lazy loading for large crates
  - Stream parsing for huge files
  - Paginate symbol lists
  - Background indexing
- [ ] Caching
  - Cache parsed crate metadata
  - Cache type resolution results
  - Cache crates.io API responses

### AI Enhancements for Rust
- [ ] Auto-generate doc comments
  - Detect uncommented pub items
  - Generate /// comments from signatures
  - Infer safety documentation for unsafe code
- [ ] Code explanation
  - Explain lifetime annotations
  - Explain trait bounds and where clauses
  - Explain unsafe blocks
  - Explain macro expansions
- [ ] Type suggestions
  - Suggest trait implementations
  - Suggest type aliases for complex types

### Advanced Features
- [ ] Unsafe code analysis
  - Highlight unsafe blocks
  - Document safety invariants
  - Track unsafe dependencies
- [ ] Macro expansion viewer
  - Show expanded macro code
  - Explain procedural macros
  - Document macro syntax
- [ ] Cross-platform support
  - Show platform-specific code (cfg attributes)
  - Display target compatibility
  - Document feature gate requirements
